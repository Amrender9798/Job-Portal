<!-- views/jobs.ejs -->

<style>
  body {
    background-color: darkorchid;
  }

  .navbar {
    color: #fff;
    border-radius: 5px;
  }

  .card {
    background-color: white;
    border: 1px solid rgba(0, 0, 0, 0.125);
    border-radius: 0.25rem;
  }
  
</style>

<div class="container mt-5">
  <div class="mb-4 d-flex justify-content-between align-items-center navbar">
    <h2 class="d-inline-block text-white">Available Jobs</h2>

    <div>
      <!-- Add Jobs button (visible only when logged in) -->
      <% if (userLoggedIn) { %>
        <a href="/add-job" class="btn btn-success ml-2">
          <i class="fas fa-plus"></i> Add Jobs
        </a>
      <% } %>

      <!-- Logout button (visible only when logged in) -->
      <% if (userLoggedIn) { %>
        <a href="/logout" class="btn btn-danger ml-2">
          <i class="fas fa-sign-out-alt"></i> Logout
        </a>
      <% } %>

      <!-- Go to Home Page button -->
      <a href="/" class="btn btn-primary ml-2">
        <i class="fas fa-home"></i> Go to Home Page
      </a>
    </div>
  </div>

  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3">
    <% Jobs.forEach(job => { %>
      <div class="col mb-4">
        <div class="card h-100">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title"><%= job.role %></h5>
            <p class="card-text"><strong>Company:</strong> <%= job.company %></p>
            <p class="card-text"><strong>Location:</strong> <%= job.location %></p>
            <p class="card-text"><strong>Package:</strong> <%= job.package %></p>

            <!-- Skills section -->
            <div class="mb-3">
              <p class="card-text"><strong>Skills:</strong> <%= job.skills.join(', ') %></p>
            </div>

            <!-- Buttons section -->
            <% if (userLoggedIn) { %>
              <!-- Display buttons only if the user is logged in -->
              <div class="d-flex">
                <!-- Update job icon -->
                <a href="/update-job/<%= job.id %>" class="btn btn-warning mr-2">
                  <i class="fas fa-pencil-alt"></i> Update
                </a>

                <!-- Delete job icon -->
                <a href="/delete-job/<%= job.id %>" class="btn btn-danger">
                  <i class="fas fa-trash"></i> Delete
                </a>
              </div>
            <% } else { %>
              <!-- Display Apply Now button if the user is not logged in -->
              <a href="/apply" class="mt-auto btn btn-primary">Apply Now</a>
            <% } %>
          </div>
        </div>
      </div>
    <% }) %>
  </div>
</div>
